{"ast":null,"code":"// src/deriveState.ts\nvar deriveState = (clerkOperational, state, initialState) => {\n  if (!clerkOperational && initialState) {\n    return deriveFromSsrInitialState(initialState);\n  }\n  return deriveFromClientSideState(state);\n};\nvar deriveFromSsrInitialState = initialState => {\n  const userId = initialState.userId;\n  const user = initialState.user;\n  const sessionId = initialState.sessionId;\n  const sessionStatus = initialState.sessionStatus;\n  const sessionClaims = initialState.sessionClaims;\n  const session = initialState.session;\n  const organization = initialState.organization;\n  const orgId = initialState.orgId;\n  const orgRole = initialState.orgRole;\n  const orgPermissions = initialState.orgPermissions;\n  const orgSlug = initialState.orgSlug;\n  const actor = initialState.actor;\n  const factorVerificationAge = initialState.factorVerificationAge;\n  return {\n    userId,\n    user,\n    sessionId,\n    session,\n    sessionStatus,\n    sessionClaims,\n    organization,\n    orgId,\n    orgRole,\n    orgPermissions,\n    orgSlug,\n    actor,\n    factorVerificationAge\n  };\n};\nvar deriveFromClientSideState = state => {\n  var _state$session, _state$session$lastAc, _user$organizationMem;\n  const userId = state.user ? state.user.id : state.user;\n  const user = state.user;\n  const sessionId = state.session ? state.session.id : state.session;\n  const session = state.session;\n  const sessionStatus = (_state$session = state.session) === null || _state$session === void 0 ? void 0 : _state$session.status;\n  const sessionClaims = state.session ? (_state$session$lastAc = state.session.lastActiveToken) === null || _state$session$lastAc === void 0 || (_state$session$lastAc = _state$session$lastAc.jwt) === null || _state$session$lastAc === void 0 ? void 0 : _state$session$lastAc.claims : null;\n  const factorVerificationAge = state.session ? state.session.factorVerificationAge : null;\n  const actor = session === null || session === void 0 ? void 0 : session.actor;\n  const organization = state.organization;\n  const orgId = state.organization ? state.organization.id : state.organization;\n  const orgSlug = organization === null || organization === void 0 ? void 0 : organization.slug;\n  const membership = organization ? user === null || user === void 0 || (_user$organizationMem = user.organizationMemberships) === null || _user$organizationMem === void 0 ? void 0 : _user$organizationMem.find(om => om.organization.id === orgId) : organization;\n  const orgPermissions = membership ? membership.permissions : membership;\n  const orgRole = membership ? membership.role : membership;\n  return {\n    userId,\n    user,\n    sessionId,\n    session,\n    sessionStatus,\n    sessionClaims,\n    organization,\n    orgId,\n    orgRole,\n    orgSlug,\n    orgPermissions,\n    actor,\n    factorVerificationAge\n  };\n};\nexport { deriveState };","map":{"version":3,"names":["deriveState","clerkOperational","state","initialState","deriveFromSsrInitialState","deriveFromClientSideState","userId","user","sessionId","sessionStatus","sessionClaims","session","organization","orgId","orgRole","orgPermissions","orgSlug","actor","factorVerificationAge","_state$session","_state$session$lastAc","_user$organizationMem","id","status","lastActiveToken","jwt","claims","slug","membership","organizationMemberships","find","om","permissions","role"],"sources":["/Users/devenspear/CascadeProjects/HealthApps25/node_modules/@clerk/shared/src/deriveState.ts"],"sourcesContent":["import type {\n  InitialState,\n  JwtPayload,\n  OrganizationCustomPermissionKey,\n  OrganizationCustomRoleKey,\n  OrganizationResource,\n  Resources,\n  SignedInSessionResource,\n  UserResource,\n} from '@clerk/types';\n\n/**\n * Derives authentication state based on the current rendering context (SSR or client-side).\n */\nexport const deriveState = (clerkOperational: boolean, state: Resources, initialState: InitialState | undefined) => {\n  if (!clerkOperational && initialState) {\n    return deriveFromSsrInitialState(initialState);\n  }\n  return deriveFromClientSideState(state);\n};\n\nconst deriveFromSsrInitialState = (initialState: InitialState) => {\n  const userId = initialState.userId;\n  const user = initialState.user as UserResource;\n  const sessionId = initialState.sessionId;\n  const sessionStatus = initialState.sessionStatus;\n  const sessionClaims = initialState.sessionClaims;\n  const session = initialState.session as SignedInSessionResource;\n  const organization = initialState.organization as OrganizationResource;\n  const orgId = initialState.orgId;\n  const orgRole = initialState.orgRole as OrganizationCustomRoleKey;\n  const orgPermissions = initialState.orgPermissions as OrganizationCustomPermissionKey[];\n  const orgSlug = initialState.orgSlug;\n  const actor = initialState.actor;\n  const factorVerificationAge = initialState.factorVerificationAge;\n\n  return {\n    userId,\n    user,\n    sessionId,\n    session,\n    sessionStatus,\n    sessionClaims,\n    organization,\n    orgId,\n    orgRole,\n    orgPermissions,\n    orgSlug,\n    actor,\n    factorVerificationAge,\n  };\n};\n\nconst deriveFromClientSideState = (state: Resources) => {\n  const userId: string | null | undefined = state.user ? state.user.id : state.user;\n  const user = state.user;\n  const sessionId: string | null | undefined = state.session ? state.session.id : state.session;\n  const session = state.session;\n  const sessionStatus = state.session?.status;\n  const sessionClaims: JwtPayload | null | undefined = state.session\n    ? state.session.lastActiveToken?.jwt?.claims\n    : null;\n  const factorVerificationAge: [number, number] | null = state.session ? state.session.factorVerificationAge : null;\n  const actor = session?.actor;\n  const organization = state.organization;\n  const orgId: string | null | undefined = state.organization ? state.organization.id : state.organization;\n  const orgSlug = organization?.slug;\n  const membership = organization\n    ? user?.organizationMemberships?.find(om => om.organization.id === orgId)\n    : organization;\n  const orgPermissions = membership ? membership.permissions : membership;\n  const orgRole = membership ? membership.role : membership;\n\n  return {\n    userId,\n    user,\n    sessionId,\n    session,\n    sessionStatus,\n    sessionClaims,\n    organization,\n    orgId,\n    orgRole,\n    orgSlug,\n    orgPermissions,\n    actor,\n    factorVerificationAge,\n  };\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}