{"ast":null,"code":"import { versionSelector } from \"./chunk-CYJGVW7X.mjs\";\nimport { isValidProxyUrl, proxyUrlToAbsoluteURL } from \"./chunk-6NDGN2IU.mjs\";\nimport { addClerkPrefix } from \"./chunk-IFTVZ2LQ.mjs\";\nimport { loadScript } from \"./chunk-E3R3SJ7O.mjs\";\nimport { buildErrorThrower } from \"./chunk-6NCNJZHF.mjs\";\nimport { createDevOrStagingUrlCache, parsePublishableKey } from \"./chunk-QU372XZW.mjs\";\n\n// src/loadClerkJsScript.ts\nvar FAILED_TO_LOAD_ERROR = \"Clerk: Failed to load Clerk\";\nvar {\n  isDevOrStagingUrl\n} = createDevOrStagingUrlCache();\nvar errorThrower = buildErrorThrower({\n  packageName: \"@clerk/shared\"\n});\nfunction setClerkJsLoadingErrorPackageName(packageName) {\n  errorThrower.setPackageName({\n    packageName\n  });\n}\nvar loadClerkJsScript = async opts => {\n  const existingScript = document.querySelector(\"script[data-clerk-js-script]\");\n  if (existingScript) {\n    return new Promise((resolve, reject) => {\n      existingScript.addEventListener(\"load\", () => {\n        resolve(existingScript);\n      });\n      existingScript.addEventListener(\"error\", () => {\n        reject(FAILED_TO_LOAD_ERROR);\n      });\n    });\n  }\n  if (!(opts !== null && opts !== void 0 && opts.publishableKey)) {\n    errorThrower.throwMissingPublishableKeyError();\n    return;\n  }\n  return loadScript(clerkJsScriptUrl(opts), {\n    async: true,\n    crossOrigin: \"anonymous\",\n    nonce: opts.nonce,\n    beforeLoad: applyClerkJsScriptAttributes(opts)\n  }).catch(() => {\n    throw new Error(FAILED_TO_LOAD_ERROR);\n  });\n};\nvar clerkJsScriptUrl = opts => {\n  var _parsePublishableKey;\n  const {\n    clerkJSUrl,\n    clerkJSVariant,\n    clerkJSVersion,\n    proxyUrl,\n    domain,\n    publishableKey\n  } = opts;\n  if (clerkJSUrl) {\n    return clerkJSUrl;\n  }\n  let scriptHost = \"\";\n  if (!!proxyUrl && isValidProxyUrl(proxyUrl)) {\n    scriptHost = proxyUrlToAbsoluteURL(proxyUrl).replace(/http(s)?:\\/\\//, \"\");\n  } else if (domain && !isDevOrStagingUrl(((_parsePublishableKey = parsePublishableKey(publishableKey)) === null || _parsePublishableKey === void 0 ? void 0 : _parsePublishableKey.frontendApi) || \"\")) {\n    scriptHost = addClerkPrefix(domain);\n  } else {\n    var _parsePublishableKey2;\n    scriptHost = ((_parsePublishableKey2 = parsePublishableKey(publishableKey)) === null || _parsePublishableKey2 === void 0 ? void 0 : _parsePublishableKey2.frontendApi) || \"\";\n  }\n  const variant = clerkJSVariant ? \"\".concat(clerkJSVariant.replace(/\\.+$/, \"\"), \".\") : \"\";\n  const version = versionSelector(clerkJSVersion);\n  return \"https://\".concat(scriptHost, \"/npm/@clerk/clerk-js@\").concat(version, \"/dist/clerk.\").concat(variant, \"browser.js\");\n};\nvar buildClerkJsScriptAttributes = options => {\n  const obj = {};\n  if (options.publishableKey) {\n    obj[\"data-clerk-publishable-key\"] = options.publishableKey;\n  }\n  if (options.proxyUrl) {\n    obj[\"data-clerk-proxy-url\"] = options.proxyUrl;\n  }\n  if (options.domain) {\n    obj[\"data-clerk-domain\"] = options.domain;\n  }\n  if (options.nonce) {\n    obj.nonce = options.nonce;\n  }\n  return obj;\n};\nvar applyClerkJsScriptAttributes = options => script => {\n  const attributes = buildClerkJsScriptAttributes(options);\n  for (const attribute in attributes) {\n    script.setAttribute(attribute, attributes[attribute]);\n  }\n};\nexport { setClerkJsLoadingErrorPackageName, loadClerkJsScript, clerkJsScriptUrl, buildClerkJsScriptAttributes };","map":{"version":3,"names":["FAILED_TO_LOAD_ERROR","isDevOrStagingUrl","createDevOrStagingUrlCache","errorThrower","buildErrorThrower","packageName","setClerkJsLoadingErrorPackageName","setPackageName","loadClerkJsScript","opts","existingScript","document","querySelector","Promise","resolve","reject","addEventListener","publishableKey","throwMissingPublishableKeyError","loadScript","clerkJsScriptUrl","async","crossOrigin","nonce","beforeLoad","applyClerkJsScriptAttributes","catch","Error","_parsePublishableKey","clerkJSUrl","clerkJSVariant","clerkJSVersion","proxyUrl","domain","scriptHost","isValidProxyUrl","proxyUrlToAbsoluteURL","replace","parsePublishableKey","frontendApi","addClerkPrefix","_parsePublishableKey2","variant","concat","version","versionSelector","buildClerkJsScriptAttributes","options","obj","script","attributes","attribute","setAttribute"],"sources":["/Users/devenspear/CascadeProjects/Paratox1.0/node_modules/@clerk/shared/src/loadClerkJsScript.ts"],"sourcesContent":["import type { ClerkOptions, SDKMetadata, Without } from '@clerk/types';\n\nimport { buildErrorThrower } from './error';\nimport { createDevOrStagingUrlCache, parsePublishableKey } from './keys';\nimport { loadScript } from './loadScript';\nimport { isValidProxyUrl, proxyUrlToAbsoluteURL } from './proxy';\nimport { addClerkPrefix } from './url';\nimport { versionSelector } from './versionSelector';\n\nconst FAILED_TO_LOAD_ERROR = 'Clerk: Failed to load Clerk';\n\nconst { isDevOrStagingUrl } = createDevOrStagingUrlCache();\n\nconst errorThrower = buildErrorThrower({ packageName: '@clerk/shared' });\n\n/**\n * Sets the package name for error messages during ClerkJS script loading.\n *\n * @example\n * setClerkJsLoadingErrorPackageName('@clerk/clerk-react');\n */\nexport function setClerkJsLoadingErrorPackageName(packageName: string) {\n  errorThrower.setPackageName({ packageName });\n}\n\ntype LoadClerkJsScriptOptions = Without<ClerkOptions, 'isSatellite'> & {\n  publishableKey: string;\n  clerkJSUrl?: string;\n  clerkJSVariant?: 'headless' | '';\n  clerkJSVersion?: string;\n  sdkMetadata?: SDKMetadata;\n  proxyUrl?: string;\n  domain?: string;\n  nonce?: string;\n};\n\n/**\n * Hotloads the Clerk JS script.\n *\n * Checks for an existing Clerk JS script. If found, it returns a promise\n * that resolves when the script loads. If not found, it uses the provided options to\n * build the Clerk JS script URL and load the script.\n *\n * @param opts - The options used to build the Clerk JS script URL and load the script.\n *               Must include a `publishableKey` if no existing script is found.\n *\n * @example\n * loadClerkJsScript({ publishableKey: 'pk_' });\n */\nconst loadClerkJsScript = async (opts?: LoadClerkJsScriptOptions) => {\n  const existingScript = document.querySelector<HTMLScriptElement>('script[data-clerk-js-script]');\n\n  if (existingScript) {\n    return new Promise((resolve, reject) => {\n      existingScript.addEventListener('load', () => {\n        resolve(existingScript);\n      });\n\n      existingScript.addEventListener('error', () => {\n        reject(FAILED_TO_LOAD_ERROR);\n      });\n    });\n  }\n\n  if (!opts?.publishableKey) {\n    errorThrower.throwMissingPublishableKeyError();\n    return;\n  }\n\n  return loadScript(clerkJsScriptUrl(opts), {\n    async: true,\n    crossOrigin: 'anonymous',\n    nonce: opts.nonce,\n    beforeLoad: applyClerkJsScriptAttributes(opts),\n  }).catch(() => {\n    throw new Error(FAILED_TO_LOAD_ERROR);\n  });\n};\n\n/**\n * Generates a Clerk JS script URL.\n *\n * @param opts - The options to use when building the Clerk JS script URL.\n *\n * @example\n * clerkJsScriptUrl({ publishableKey: 'pk_' });\n */\nconst clerkJsScriptUrl = (opts: LoadClerkJsScriptOptions) => {\n  const { clerkJSUrl, clerkJSVariant, clerkJSVersion, proxyUrl, domain, publishableKey } = opts;\n\n  if (clerkJSUrl) {\n    return clerkJSUrl;\n  }\n\n  let scriptHost = '';\n  if (!!proxyUrl && isValidProxyUrl(proxyUrl)) {\n    scriptHost = proxyUrlToAbsoluteURL(proxyUrl).replace(/http(s)?:\\/\\//, '');\n  } else if (domain && !isDevOrStagingUrl(parsePublishableKey(publishableKey)?.frontendApi || '')) {\n    scriptHost = addClerkPrefix(domain);\n  } else {\n    scriptHost = parsePublishableKey(publishableKey)?.frontendApi || '';\n  }\n\n  const variant = clerkJSVariant ? `${clerkJSVariant.replace(/\\.+$/, '')}.` : '';\n  const version = versionSelector(clerkJSVersion);\n  return `https://${scriptHost}/npm/@clerk/clerk-js@${version}/dist/clerk.${variant}browser.js`;\n};\n\n/**\n * Builds an object of Clerk JS script attributes.\n */\nconst buildClerkJsScriptAttributes = (options: LoadClerkJsScriptOptions) => {\n  const obj: Record<string, string> = {};\n\n  if (options.publishableKey) {\n    obj['data-clerk-publishable-key'] = options.publishableKey;\n  }\n\n  if (options.proxyUrl) {\n    obj['data-clerk-proxy-url'] = options.proxyUrl;\n  }\n\n  if (options.domain) {\n    obj['data-clerk-domain'] = options.domain;\n  }\n\n  if (options.nonce) {\n    obj.nonce = options.nonce;\n  }\n\n  return obj;\n};\n\nconst applyClerkJsScriptAttributes = (options: LoadClerkJsScriptOptions) => (script: HTMLScriptElement) => {\n  const attributes = buildClerkJsScriptAttributes(options);\n  for (const attribute in attributes) {\n    script.setAttribute(attribute, attributes[attribute]);\n  }\n};\n\nexport { loadClerkJsScript, buildClerkJsScriptAttributes, clerkJsScriptUrl };\nexport type { LoadClerkJsScriptOptions };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}